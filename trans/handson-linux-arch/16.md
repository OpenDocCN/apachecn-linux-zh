# 十六、答案

# 第一章:设计方法论介绍

1.  问题陈述→信息收集→解决方案建议→实施。
2.  因为它允许建立正确的需求。
3.  为客户选择正确的解决方案留出空间。
4.  在*部分探讨了分析问题并提出正确的问题。*
5.  概念证明。
6.  实际的解决方案已经交付并经过测试。
7.  它允许我们探索实际工作环境解决方案的不同概念。

# 第 2 章:定义 GlusterFS 存储

1.  [第 5 章](05.html)、*分析一个忧郁体系中的表现*进一步分析了这一点。
2.  文件存储更适合 GlusterFS 的工作方式。
3.  如今，几乎所有的云提供商都提供对象存储。
4.  文件存储、块存储(通过 iSCSI 启动器)和对象存储(通过插件)。
5.  不，但是它确实有助于这个项目。
6.  GlusterFS 是免费的开源软件；只需从您最喜欢的软件包管理器下载即可。
7.  它是通过地理复制功能实现的。

# 第 3 章:构建存储集群

1.  这取决于使用的卷类型，但 2 个 CPU 和 4+GB 的 RAM 是一个很好的起点。
2.  GlusterFS 将使用砖块的文件系统缓存机制。
3.  它是一个快速存储层，将为 I/o 提供服务，而不是转到较慢的存储。缓存可以是内存或更快的存储介质，如固态硬盘。
4.  随着并发性的提高，软件将需要更多的 CPU 周期来处理请求。
5.  分布式将聚合空间，复制将镜像数据，因此空间“减半”，分散将聚合空间，但将消耗 1 个节点进行奇偶校验。把它当成一个 RAID5。
6.  取决于许多变量，如保留期、数据进入等...
7.  预期的数据增长量。
8.  吞吐量是给定时间内给定数据量的函数，通常显示为每秒 MB/s 或兆字节
    **每秒输入输出操作**(**【IOPS】**)是每秒一定操作量的函数
    **I/O 大小**是指设备完成的请求大小
9.  GlusterFS 使用的存储位置的布局。
10.  GlusterFS 将数据从一个集群复制到另一个集群的过程，通常位于不同的地理位置..

# 第 4 章:在云基础设施上使用 GlusterFS

1.  GlusterFS 用来存储实际数据的存储位置。
2.  Z 文件系统，一个由太阳微系统公司创建的高级文件系统，后来成为开源的。
3.  ZFS 存储池。
4.  用于读取请求的磁盘，通常比 zpool 中使用的磁盘速度更快，延迟更低。
5.  通常是通过操作系统的包管理器，比如 yum。
6.  将参与同一个集群的 GlusterFS 节点池。
7.  <volume name=""><volume type=""><number of="" nodes=""><node and="" brick="" paths="">的郁闷卷。</node></number></volume></volume>

8.  此设置控制将有多少内存用于缓存。
9.  自适应替换缓存，这是 ZFSs 缓存算法。

# 第五章:分析一个忧郁系统的表现

1.  兆字节/秒，吞吐量测量。
2.  显示 ZFS 的输入/输出统计数据。
3.  sysstat 包的一部分，用于块设备输入/输出统计。
4.  这是读取延迟，以毫秒为单位。
5.  中央处理器等待未完成的输入/输出完成的时间。
6.  灵活的输入/输出测试，一个用于输入/输出基准测试的工具。
7.  或者通过配置文件，或者通过将参数直接传递给命令。
8.  告诉 FIO 如何运行测试的文件。
9.  故意杀死其中一个节点。
10.  通过增加节点上的资源或增加磁盘大小。

# 第 6 章:创建高可用性自愈架构

1.  Kubernetes 的主要组件分为控制平面和 API 对象。
2.  其中三个是托管的 Kubernetes 解决方案，分别由三个市长公共云提供商谷歌、亚马逊和微软提供。
3.  容器的攻击面较小，但这并不能使它们免受攻击，但是市长容器运行时项目得到了很好的维护，如果检测到攻击，它会被迅速处理。
4.  这将取决于您尝试运行的应用的类型以及您对该技术的熟悉程度。将应用迁移到容器通常很容易，但是以最有效的方式进行迁移是需要做的工作。
5.  不，你可以找到窗口的 Docker 引擎，在撰写本文时，Kubernetes 窗口节点处于测试阶段。

# 第 7 章:理解Kubernetes集群的核心组件

1.  在撰写本文时，Kubernetes 是市场上的市长容器指挥者。
2.  Kubernetes 由组成集群的二进制文件和称为 API 对象的逻辑对象组成。
3.  Kubernetes API 对象是由编排者管理的逻辑对象。
4.  我们可以运行协调的容器化工作负载。
5.  容器编排器是一种工具，负责管理我们正在运行的容器以及与保持工作负载高可用性相关的不同任务。
6.  Pod 是 Kubernetes 的最小逻辑对象，它将一个或多个容器封装在共享的名称空间中。
7.  部署是一组由 Kubernetes 复制控制器管理的复制 Pods。

# 第 8 章:在蔚蓝色上构建 Kubernetes

1.  由于 ETCD 的多数机制，奇数是首选，以便能够达到多数票的所有时间。
2.  是的，但是它也可以在单独的一组音符中运行。
3.  由于心跳和领导人选举的频率，建议降低延迟。
4.  工作节点是负责运行容器工作负载的集群成员。
5.  工作负载的类型以及每个工作负载将要运行的容器数量。
6.  所有存储提供者或提供者都可以在这里找到:[https://kubernetes . io/docs/concepts/storage/storage-class/# provisioner](https://kubernetes.io/docs/concepts/storage/storage-classes/#provisioner)
7.  需要一个负载平衡器来跨所有复制的 Pods 发送请求。
8.  名称空间可以用来对集群进行逻辑分区，并为每个逻辑分区分配角色和资源。

# 第 9 章:部署和配置 Kubernetes

1.  安装 Kubernetes 有几种方法，从像`kubeadm`和`kubespray`这样的自动配置工具，到完全手动安装。你可以通过以下链接找到更多安装方法:[https://kubernetes.io/docs/setup/](https://kubernetes.io/docs/setup/)
2.  一个`kubeconfig`文件包含了与 API 服务器通信和认证的所有必要信息。
3.  你可以用几种工具创建 SSL 证书，在本书中我们使用了`cffssl`。但是你也可以使用`openssl`和`easyrsa`。
4.  **Azure Kubernetes 服务** ( **AKS** )是微软为其公有云 Azure 提供的托管 Kubernetes 解决方案。
5.  Azure CLI 可以在任何一种操作系统中使用，因为它是基于 Python 的命令行界面。
6.  您可以通过 Azure 命令行界面、PowerShell 或 Azure 图形用户界面创建资源组。
7.  您可以在以下链接找到安装 etcd 的不同方式:[http://play.etcd.io/install](http://play.etcd.io/install)

# 第 10 章:使用 ELK 栈进行监控

1.  主动收集数据的过程。
2.  通过了解使用趋势，可以用实际数据做出购买更多资源等决策。
3.  通过将数据放在一个地方，可以在事件发生之前主动检测到它们。
4.  了解存储系统的正常行为，从而为性能提供基准。
5.  当在不该出现尖峰的地方看到尖峰时，这可能意味着行为不稳定。
6.  不必检查环境中的每台主机，而是可以通过单个集中位置进行检查。
7.  数据索引和分析软件。
8.  Elasticsearch 以 json 格式存储数据。

9.  Logstash 是一个数据处理解析器，允许在数据被发送到 Elasticsearch 之前对其进行操作。
10.  Kibana 为 Elasticsearch 提供了可视化界面，允许数据容易地可视化。

# 第 11 章:设计 ELK 栈

1.  在较小的部署中，至少需要 2 个 CPU 内核才能实现最佳功能。
2.  至少 2Ghz。
3.  较慢或少于 2 个 CPU 主要影响Elasticsearch启动时间、索引速率和延迟。
4.  内核使用可用的内存来缓存对文件系统的请求。
5.  如果发生交换，搜索延迟将受到很大影响。
6.  如果没有足够的内存，Elasticsearch将无法启动，如果内存不足，一旦运行，OOM 将杀死Elasticsearch。
7.  最低为 2.5GB，但建议为 4GB。
8.  `/var/lib/elasticsearch`
9.  更低的延迟有助于索引/搜索延迟。
10.  2GB 内存和 1 个中央处理器。
11.  这是一个存储位置，在崩溃的情况下，logstash 将在这里持久地存储队列。
12.  有多少用户将同时访问仪表板。

# 第 12 章:使用Elasticsearch、Logstash和 Kibana 来管理日志

1.  可以通过包管理器安装 Elasticsearch。
2.  这是通过分开来完成的。
3.  将磁盘的 UUID 添加到`/etc/fstab`。
4.  `/etc/elasticsearch/elasticsearch.yml`
5.  这就给集群起了一个名字，这个名字应该在节点间保持一致，这样每个节点都可以加入同一个集群。

6.  数字由`(N/2)+1`决定。
7.  通过使用相同的 cluster.name 设置，第二个节点将加入同一群集。
8.  添加回购，通过`yum`安装，为 logstash 分区磁盘。
9.  这是一个存储位置，在崩溃的情况下，logstash 将在这里持久地存储队列。
10.  协调节点是不接受输入、不存储数据或参与主/从选举的Elasticsearch节点。
11.  Beats 是来自 Elastic.co 的轻量级数据托运人。
12.  Filebeat 的功能是从`syslog`、apache 等来源收集日志，稍后发送到 Elasticsearch 或 Logstash。

# 第 13 章:用Salt 解决方案解决管理问题

1.  是维护现有信息技术基础设施的任务。
2.  集中所有基础架构，无论其操作系统或体系结构如何。
3.  木偶、厨师、易卜生、太空行走、盐堆和许多其他角色。
4.  用能够描述信息技术基础设施状态的特定语言编写所需的状态。
5.  推拉。
6.  Salt 是一个开源项目/软件，来解决系统管理的许多挑战。
7.  主人和爪牙。

# 第 14 章:设计Salt 解决方案和安装软件

1.  任何 Linux 发行版。
2.  最少需要一个自我管理的节点。
3.  为我们的存储栈提供高可用性和平衡。
4.  手动安装二进制文件，并通过引导脚本。

5.  通过他们的钥匙。
6.  通过`test.ping`功能。
7.  谷物包含迷你特定信息(元数据)或标签。支柱包含配置和敏感信息。

# 第 15 章:设计最佳实践

1.  HIPAA 代表健康保险可移植性和责任法案，它是处理健康和医疗数据的标准。
2.  类型 1/类型 2 虚拟机管理程序(**基于内核的虚拟机** ( **KVM** )、 **Linux 容器** ( **LXC** )、XEN)
    Linux 适用于 SAP HANA
    Apache Hadoop
    Linux 适用于 Oracle DB
    大型 MongoDB 部署适用于内存缓存
    **高性能计算** ( **HPC** )
3.  是的，理想情况下，虚拟机管理程序需要访问资源才能更有效地将资源提供给虚拟机。
4.  是的，中央处理器是共享的主要资源，因为物理中央处理器必须为同一节点中的所有虚拟机提供周期服务。
5.  允许不同的网络流量通过不同的网卡/子网。
6.  这是一种迁移方法，实际上将现有工作负载从内部迁移到云中。
7.  这是一种迁移方法，它利用对体系结构的一些更改来利用云上提供的解决方案。
8.  这是一种迁移方法，包括将解决方案重新架构到云中。